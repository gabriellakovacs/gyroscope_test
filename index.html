<!doctype html>
<html>
<head>
    <title>gyroscope-test</title>
    <style>

    body {
        margin: 0;
        padding: 0;
    }

      canvas 
      { 
       /* margin: 0px;
        width: 100%; 
        height: 100% ;
        position: fixed;
        top:0px;
        z-index: -10;*/
      } 
      .text {
        position: fixed;
        top: 50vh;
        left: 50vw;
      }
    </style>
    <script type="text/javascript" src="modernizr.js"></script>
</head>
<body>
  <div class="text">
   alpha:<span id="alpha"></span><br>
beta:<span id="beta"></span><br>
gamma:<span id="gamma"></span><br>

  </div>
    
    
    <canvas id="canvas"></canvas>
    
    <script>

    
      //get orientation info, rolling back if gyro info not available
      if (window.DeviceMotionEvent) {//
          window.addEventListener("devicemotion", function () {//gyro
              processGyro(event.rotationRate.alpha, event.rotationRate.beta, event.rotationRate.gamma); 
          }, true);
      } 



      function processGyro(alpha,beta,gamma)
      {
        document.getElementById("alpha").innerHTML=alpha;
        document.getElementById("beta").innerHTML=beta;
        document.getElementById("gamma").innerHTML =gamma;
      }
    // var accelerationIncludingGravityData = {x:0, y:0, z:0};
    // document.getElementById("alpha").innerHTML = "a";


    // //if (window.DeviceMotionEvent) {
    //     window.addEventListener("ondevicemotion", function () {
    //         processAccelerationData(event.accelerationIncludingGravity.x, event.accelerationIncludingGravity.y, event.accelerationIncludingGravity.z); 
    //     }, true);
    // //} 

    // function processAccelerationData(x, y, z) { 
    //     accelerationIncludingGravityData.x = Math.round(x * 100) / 10;
    //     accelerationIncludingGravityData.y = Math.round(y * 100) / 10;
    //     accelerationIncludingGravityData.z = Math.round(z * 100) / 10;
        
    //     document.getElementById("alpha").innerHTML = accelerationIncludingGravityData.x;
    //     document.getElementById("beta").innerHTML = accelerationIncludingGravityData.y;
    //     document.getElementById("gamma").innerHTML = accelerationIncludingGravityData.z;
    // }

   //  function Point (x, y){
   //     this.x = x;
   //     this.y = y;
   // }
   // var origin = new Point(0, 0);

   // function drawQuadrangle (p1, p2, p3, p4, color){
   //      context.fillStyle = color;
   //      context.beginPath();
   //      context.moveTo(p1.x, p1.y);
   //      context.lineTo(p2.x, p2.y);
   //      context.lineTo(p3.x, p3.y);
   //      context.lineTo(p4.x, p4.y);
   //      context.fill();
   //  }

   //  function Line (slope, p){
   //      this.slope = slope;
   //      this.constant = p.y - slope * p.x;
   //  }

   //  Line.prototype.getpY = function(pX) {
   //      return pX * this.slope + this.constant;

   //  };   

   // function degToRad(deg){
   //       return deg * Math.PI / 180; 
   //  }

   //  function renderLoop() {
   //    requestAnimationFrame( renderLoop );
   //    context.clearRect( -canvas.width/2, -canvas.height/2, canvas.width, canvas.height);
   //    renderObj();
   //  }

   //  var canvas = document.getElementById('canvas');
   //  var context = canvas.getContext('2d');
   //  var viewportW = window.innerWidth;
   //  var viewportH = window.innerHeight;

   //  context.canvas.width  = viewportW;
   //  context.canvas.height = viewportH;
   //  context.translate(canvas.width / 2, canvas.height / 2); //put 0,0 origin at center of the screen 

    
   //  renderLoop();

    

   //  function renderObj(obj){

   //   if( Math.abs(accelerationIncludingGravityData.x) === 10){ // exact landscape position
   //      var p1 = new Point(0, -viewportH/2);
   //      var p2 = new Point(0, viewportH/2);
   //          if(accelerationIncludingGravityData.x > 0){
   //              var p3 = new Point(viewportW/2, viewportH/2);
   //              var p4 = new Point(viewportW/2, -viewportH/2);
   //          } else {
   //              var p3 = new Point(-viewportW/2, viewportH/2);
   //              var p4 = new Point(-viewportW/2, -viewportH/2);
   //          }

   //      }else {
   //          if(accelerationIncludingGravityData.y <= 0){
   //          var rotatedline = new Line(-Math.tan(accelerationIncludingGravityData.x * 9/180 * Math.PI), origin);
   //          var p3 = new Point(viewportW/2, viewportH/2);
   //          var p4 = new Point(-viewportW/2, viewportH/2);

   //        } else{
   //          var rotatedline = new Line(Math.tan(accelerationIncludingGravityData.x * 9/180 * Math.PI), origin);
   //          var p3 = new Point(viewportW/2, -viewportH/2);
   //          var p4 = new Point(-viewportW/2, -viewportH/2);
   //        }
   //        var p1 = new Point(-viewportW/2, rotatedline.getpY(-viewportW/2));
   //        var p2 = new Point(viewportW/2, rotatedline.getpY(viewportW/2));

   //      }  
   //      drawQuadrangle (p1, p2, p3, p4, "#0055ff")
            
   //  }
    
    

 


            
     </script>

   
    <script>
//     var accelerationIncludingGravityData = {x:0, y:0, z:0};

//      if (window.DeviceMotionEvent) {
//         window.addEventListener("devicemotion", function () {
//             processAccelerationData(
//                 event.accelerationIncludingGravity.x, 
//                 event.accelerationIncludingGravity.y, 
//                 event.accelerationIncludingGravity.z); 
//         }, true);
//     } 

//      function processAccelerationData(x, y, z) { 
//         accelerationIncludingGravityData.x = x;
//         accelerationIncludingGravityData.y = y;
//         accelerationIncludingGravityData.z = z;
        
//         document.getElementById("alpha").innerHTML = accelerationIncludingGravityData.x;
//         document.getElementById("beta").innerHTML = accelerationIncludingGravityData.y;
//         document.getElementById("gamma").innerHTML = accelerationIncludingGravityData.z;

//         //rotateD();
//     }


//     var canvas = document.getElementById('canvas');
//     var c = canvas.getContext('2d');

//     var viewportW = window.innerWidth;
//     var viewportH = window.innerHeight;

//     canvas.width = viewportW;
//     canvas.height = viewportH;


//     c.fillStyle = "#0055ff";
//     c.fillRect(0,viewportH/2,viewportW,viewportH);

//     function Point (x, y){
//         this.x = x;
//         this.y = y;
//     }

//     function Line (slope, p){
//         this.slope = slope;
//         this.constant = p.y - slope * p.x;
//     }

//     Line.prototype.getpY = function(pX) {
//         return pX * this.slope + this.constant;

//     };   



//     function drawQuadrangle (p1, p2, p3, p4, color){
//         c.fillStyle = color;
//         c.beginPath();
//         c.moveTo(p1.x, p1.y);
//         c.lineTo(p2.x, p2.y);
//         c.lineTo(p3.x, p3.y);
//         c.lineTo(p4.x, p4.y);
//         c.fill();
//     }


//     var center = new Point(viewportW/2, viewportH/2);



//     var pa = document.getElementById('alpha'),
//     pb = document.getElementById('beta'),
//     pg = document.getElementById('gamma');


//     // window.ondevicemotion = function(){
//     //     debounce(rotateD(event), 300);
//     // } 

//     // function debounce(fn, delay) {
//     //     var timer = null;
//     //     return function () {
//     //         var context = this, args = arguments;
//     //         clearTimeout(timer);
//     //         timer = setTimeout(function () {
//     //             fn.apply(context, args);
//     //         }, delay);
//     //     };
//     // }
//     renderLoop()

//     function renderLoop() {
//       requestAnimationFrame( renderLoop );
//       c.clearRect( 0, 0, canvas.width, canvas.height);
//       rotateD();
//     }

//     function rotateD() {

//         if( Math.abs(accelerationIncludingGravityData.x) === 10){ // exact landscape position
//             var p1 = new Point(viewportW/2, 0);
//             var p2 = new Point(viewportW/2, viewportH);
//             if(accelerationIncludingGravityData.x > 0){
//                 var p3 = new Point(viewportW, viewportH);
//                 var p4 = new Point(viewportW, 0);
//             } else {
//                 var p3 = new Point(0, viewportH);
//                 var p4 = new Point(0, 0);
//             }

//         }else {
//             if(accelerationIncludingGravityData.y <= 0){
//                 var rotatedline = new Line(-Math.tan(accelerationIncludingGravityData.x*9/180 * Math.PI), center);
//                 var p3 = new Point(viewportW, viewportH);
//                 var p4 = new Point(0, viewportH);

//             } else{
//                 var rotatedline = new Line(Math.tan(accelerationIncludingGravityData.x*9/180 * Math.PI), center);
//                 var p3 = new Point(viewportW, 0);
//                 var p4 = new Point(0, 0);
//             }
//             var p1 = new Point(0, rotatedline.getpY(0));
//             var p2 = new Point(viewportW, rotatedline.getpY(viewportW));

//         }  


//         drawQuadrangle(p1, p2, p3, p4, "#0055ff");





// }


    </script>
</body>
</html>