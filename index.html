<!doctype html>
<html>
<head>
    <title>gyroscope-test</title>
    <style>

    body {
        margin: 0;
        padding: 0;
    }

    html {
        overflow: hidden;
    }
  
    </style>

</head>
<body>
  
    <p id="alpha"></p>
    <p id="beta"></p>
    <p id="gamma"></p>

    <p id="rotationAlpha"></p>
    <p id="rotationBeta"></p>
    <p id="rotationGamma"></p>
    <canvas id="canvas"></canvas>

    // <script type="text/javascript" src="fulltilt.js"></script>
    <script>
    var canvas = document.getElementById('canvas');
    var c = canvas.getContext('2d');

    var viewportW = window.innerWidth;
    var viewportH = window.innerHeight;

    canvas.width = viewportW;
    canvas.height = viewportH;
    

    // c.fillStyle = "#0055ff";
    // c.fillRect(0,viewportH/2,viewportW,viewportH);

    function Point (x, y){

               this.x = x;
               this.y = y;
           }

    function Line (slope, p){
        this.slope = slope;
        this.constant = p.y - slope * p.x;
    }

    Line.prototype.getpY = function(pX) {
        return pX * this.slope + this.constant;

    };   



    function drawQuadrangle (p1, p2, p3, p4, color){
        c.fillStyle = color;
        c.beginPath();
        c.moveTo(p1.x, p1.y);
        c.lineTo(p2.x, p2.y);
        c.lineTo(p3.x, p3.y);
        c.lineTo(p4.x, p4.y);
        c.fill();
    }
    

    var center = new Point(viewportW/2, viewportH/2);

//-----------------------------------------------------------------------------------------------------------------------------------------------
//    var x = 0, 
//    y = 0, 
//    vx = 0, 
//    vy = 0, ax = 0, ay = 0;
  


// if (window.DeviceMotionEvent != undefined) {
//   window.ondevicemotion = function(e) {
//     ax = event.accelerationIncludingGravity.x * 5;
//     ay = event.accelerationIncludingGravity.y * 5;
   

//     if ( e.rotationRate ) {
//       document.getElementById("rotationAlpha").innerHTML = Math.round(e.rotationRate.alpha);
//       document.getElementById("rotationBeta").innerHTML = Math.round(e.rotationRate.beta);
//       document.getElementById("rotationGamma").innerHTML = Math.round(e.rotationRate.gamma);
//     }   
//   }

//   setInterval( function() {
//     var landscapeOrientation = window.innerWidth/window.innerHeight > 1;
//     if ( landscapeOrientation) {
//       vx = vx + ay;
//       vy = vy + ax;
//     } else {
//       vy = vy - ay;
//       vx = vx + ax;
//     }
//     vx = vx * 0.98;
//     vy = vy * 0.98;
//     y = parseInt(y + vy / 50);
//     x = parseInt(x + vx / 50);
    
//     boundingBoxCheck();
    
//     sphere.style.top = y + "px";
//     sphere.style.left = x + "px";
    
//   }, 25);
// } 


// function boundingBoxCheck(){
//   if (x<0) { x = 0; vx = -vx; }
//   if (y<0) { y = 0; vy = -vy; }
//   if (x>document.documentElement.clientWidth-20) { x = document.documentElement.clientWidth-20; vx = -vx; }
//   if (y>document.documentElement.clientHeight-20) { y = document.documentElement.clientHeight-20; vy = -vy; }
  
// }




    window.ondevicemotion  = function(event) {

        // c.fillStyle = "#ffffff";
        // c.fillRect(0,0,viewportW,viewportH);

        alpha = Math.round(event.accelerationIncludingGravity.x);
        beta = Math.round(event.accelerationIncludingGravity.y  );
        gamma = Math.round(event.accelerationIncludingGravity.z);

        document.getElementById("alpha").innerHTML = "original" + alpha;
      document.getElementById("beta").innerHTML = "original" + beta;
      document.getElementById("gamma").innerHTML = "original" + gamma;
    

        // var rotatedline = new Line(Math.tan(alpha/180 * Math.PI), center);

        
        
        // document.getElementById("gamma").innerHTML = "p1 (0, " + rotatedline.getpY(0) + ")  p2 (" + viewportW + ", " + rotatedline.getpY(viewportW) + ") p3 (" + viewportW + ", " + viewportH + ") p4 ( 0, " +  viewportH + ")";

        


        // var p1 = new Point(0, rotatedline.getpY(0));
        // var p2 = new Point(viewportW, rotatedline.getpY(viewportW));
        // var p3 = new Point(viewportW, viewportH);
        // var p4 = new Point(0, viewportH);

        // drawQuadrangle(p1, p2, p3, p4, "#0055ff");
    }


    </script>
</body>
</html>